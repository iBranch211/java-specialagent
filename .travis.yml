# Copyright 2019 The OpenTracing Authors
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

dist: trusty
language: java
cache:
  directories:
  - ~/.m2
before_install:
- 'export MAVEN_OPTS=-Dorg.slf4j.simpleLogger.log.org.apache.maven.cli.transfer.Slf4jMavenTransferListener=warn &&
   cp settings.xml $HOME/.m2/settings.xml;'
stages:
- install
- test
- deploy
jobs:
  include:
  - stage: install
    jdk: oraclejdk8
    install: rm -rf ~/.m2/build ~/.m2/repository/io/opentracing/contrib/specialagent
    script:
    - 'if [ "$TRAVIS_BRANCH" = "master" ] &&
          [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
        mvn -B -P report install &&
        mvn -B -DrepoToken=$REPO_TOKEN coveralls:report &&
        mvn -B -Dassemble install;
      else
        mvn -B install &&
        mvn -B -Dassemble install;
      fi'
    before_cache: find . -name target -exec rsync -R -r '{}' ~/.m2/build \;
  - stage: install
    jdk: oraclejdk11
    install: rm -rf ~/.m2/build ~/.m2/repository/io/opentracing/contrib/specialagent
    script:
    - 'mvn -B install &&
       mvn -B -Dassemble install;'
    before_cache: find . -name target -exec rsync -R -r '{}' ~/.m2/build \;
  - stage: deploy
    jdk: oraclejdk8
    install: rsync -r ~/.m2/build/ .
    script:
    - 'if [ "$TRAVIS_BRANCH" = "master" ] &&
          [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
        SECRET="VTJGc2RHVmtYMS8za2V3UWlUOG9QNlV0K0dFWmdkQVp5THZBemtlSXovQ1hOUWJiTmhudjUwRHN0bG5PWUhoRQpLL0QzdUl6V3lBNEp6OHZUeW9qakFHZXZxbzI3aVRvMjNUa2liQ05RUzdENEJ5RlNqUktOazdWcUgrV1VOYittCjU5YTFsYjBWQi9ZbjZZR0N1ZEdBWHJXUVlMTi80ZERGQWlhZnFBcXBIajhvLzdRZHNwM3hGWjhidlZMbkdSbVYKMklsdU1peC9nL1NKUEtSUWlWd2hFR1FKSW1KdGdxR2MzUXRSR201cHZLRU8ydTRWWHJQZFF6RkNzWXFZcFkzeApWb3JWZ2tUeDJFblUrWjNHODloUCtqT1hUYW1GdjF1UTg0SkROd0RGOVAxNE4waG1RL1hUdXJEQ2xuOFZDUkpSCndsdGdFVnNGMmgrK25VS1lUbi9VSTVsVzZyNi9JZG42cHBScHVkVXJPOEQxMk9EQytYaFAxbUplZml3MTM3SzkKdCtWOUhoZEpTY3FPTWVxdzZISFY2K1FObDJoR1M4U0pmNFdYTTlFWkxxaloyMVZHV1dUaUsyZWJMZU5WYUF2awpCYlBrNUtqUm90TmZBTXBxR01MY2pGenkvVkNjN1pVYllvdzVHOXpWbFR0eklrS1BuMHNRc0NENDFYZStHM21MCnhwMGJ2ZnRsZUhYallmeVhwQlFLcFR5cmQwSXY5eHRJTCtWamduSExDTC9uRnpFYmMwM1g4VEo0ZWZFV2ZkcHAKYnVheWlyV2F4anVWUUl2d3VXOHNqKzB1cWJQV1NZYTFOVlU5N29Fc0YvcnVjOC95QlVGbURWMWxxQ2IyaXhsTwpKWVcxUVh5UWYzZWlmbkM2enA0eDN5bTFvOHBVMHZLVmx1YTFmVE02d0ZCa1hUUVM1cnc5OUR0T3QwYlRBZ04wClNMaUhlTkVSYy80QXNOa1ROdHdvL0JrMWtkbHhYcDhHUDhuL3cxcXNtUjF5VEtjYXFNZUMvR1hPamRXWnNnTVgKUTdmSmRRRG1zQ0hhbTNzZ3RlMytxKy8vQkxCMFo5YjBqUnZ3TlNzOGNkVkdybWhlQmZYSlBkTUFKZ2U5bVpKRApmUEhtUDhWZnp5enRrMUxpZWloMVc4d1g1VDV5clBLV2Z4WHpZdmlUVnhESVZodXBpL3pCdGFsek1rZFlwRnprCnBtSXgwYmp3MjJhUFIxOUY1MkpTdHQxekRkVUFxRkRNQlZKcm1yU2J6Ky9nT1UvNG1oLzN6cFRxc2dINWF3U3IKTHZ0SkJ4c2FtY3hhZG1neXZFaXhhM3N5OVJFSk5zQklXbFRsdCt0anZjM2oxdCs4RVptakpGUlRKbmNQdVZNYwozYk1kc0ZWc0NXZXBiQWlBMmZ3UnRTR09NV3BjWFFjOXVzZnI3TmJ6WUlPa2ZvVy9rdlh0ck9uUGRmK0x6aDU4CmJSa0lzYWdJTHlTRkxKWEdRSmw2MjNJY2VjN2hnMHZUSytCU1pORXNBSi9FUFE0cmYrMEFNYXZiUCtsa2toSWIKMDN4amxDaldOK2dnaUlBaStER2tRWjFVL3FvZDluQ1lmM1MrNUpSSW9ZK0hGc3JsNW9JeFVjWC9jenl1L0Z1Mgo2TlFBZ2kvcWo2TzA3eUpqb0RuVnFDNlBjdXFGSDFxSUw4Y1Y2SWErQnBxRlNobDg4cExodVI1RWVyTEFLcDdvCmU4bEpWR2U1b243SjNHQXNJSEE4bkxHWUo1N0JaWFJSRGxPU0E2eXJCcmtoUWdqU2lrcHc3VlpqUkdQREdIenUKTk1FUzNqTTdRK2ZoWTVNd0RWOG96WEVEVVo0RTJHT2pTRHJqT1hydUJGZ1pBZmx3WmdCWS9DclAwN3FIcUZvMgpWai9ydTd4WkUwTXdDYnpJcSsxb0tROTlxWnc2QVM0d0F2cmZ3TWNtc3hjam9ydlovSDM4WG9GMG5Fa1JBaDYwCm1pQ29kRFJZY0JZcnpUSmxmczVLN2RIMmNMWlZSUDRDQS83bVQvTlQ5SFp4Nk5oUzBmeGNlc0lOSXRGeGhycWQKUWlJbnZSWDRnZENXMUdSZU1EZk9aMUdVSjdSWTFHS3JoMEdzUTZNSS9JTWFQcWtTNTUxbFBPSFVzL3pCODdoMQpkQnYvWFFocjYvc2VFc2VNTnZaOVdRa0FReEl3MDhIVi9meHlpK3BoWCt2M0lhVW1PN3prdHhza29oRzZZeVFzClFuMERVTzNqc2NRcHl0bXdWSVVldXU5Z0E3Mk02K1UrNllWRG81Qk5mQjBUSkFYOWRwWk90dFBBWFZIQi93dzEKcGgvckN3eW1NZWFXZk1VZVdGQTZmODA0b21EakozdU1ZZCttKzdOdVl5UENZR2N4ZVJBRWVnY1lPdFgwVGZQWQpoRGtYTUViRnR3RUJsbmNRMDgzK0pRN1VHcTBlQmVUSS9jMjMwYmpjclFXV1N1K0lUVTFEQU8ydGR5S1Q4ckhnCmlhTTl5cW13OXI3d2lqK0NSTGt0SExyNVEvQ0xsUlRDdi9SL2NXMnlML05ZKzY1RUJkekd5YWZLSVMxNE1Hbm0KZEJGNTcyZGx1Wk1sR3g0S1kyL2pCZnRoL1o1MnhRRUNQYnlEU0hTb3IvMmMzLzY3alIrdWRVcWp3WFlkd3dVNAphWnJpNGZRaGt3STFEOVFhcVRnbzRKSjlFcm9MWmVHY0hCYXZKbi9Pa2grQUtGN0pMWHdYRkREK2QvaHdzaWsxCktxRWZvSHlONkJMb05QdVg4aGlkNks3UXorTG1JSmpZWHlpVEwzWFlBMnFDZzZGTDJ0UFU0ZlJwd2g0Z2dLNTIKemt4ajZNODdCYmlYSTcrUFJHbXE1UkZSa3RZVzVRSWQ5aXNKUEtxV0NKWUVadGRwVnBLajhsUUcxeTh5UXBZZwpqUi9ubkprQkhNbVY0RWQ3K05jSlYvdEVrd2l3NmxPUFdpZkY5WElENklWdSsvWWFKcXVsUWtmTUdhQ010aENmCndEd3RwUmQ4bnJ5dCtLcFg5MTNsenQyZHo2UmE1bzdiYmlFUGI4Nmhyays4dGYwcSt5cWtOaVdZUVN4c1orTFAKbWJZMGt6ODdZQTcvVU50aTNld0RFS2Q0bW1tV0xSaFlzTlZDU0FrTWgwUkQ4YUR0WjhoOVBLVjhxUXZFakNUdwpiTDBqeVM0alcxVXE2MDYxUWlDbTFCY2F1YWY4cjlvZUMvZ1dFbHVrZlJhYUhaQzh4WkdSY1NKeXh6bjNEYVNHCkF3REdTYm1Xd1dkZ1UrOUdPSDk5aUdabWIxNUR2Nk9RWllJNjRGY0w5bjcwRmpHRzhHbGZBV0pidnV6b0JjaEMKSFJibk5JRnArc2VNMkFZK3U4Wm5BdS9kcnRMVXJkSUFNbmdoMmh2a2M5MWM2OHRSOXA4V3dzQmk5ODFuemlqdwpWU2x1OERUUnRQOThnejJVdVVoYm5XeGpkOTc2TFlzalhWTmZoazRoWUEydm9wQUIzdU9yYXhZZk9DNXNTWlRGCk9BZGlWK25JR0kyRlZVWHJuTE9GMGR0MnMzaXh4WHVKaWxVcHRya1ZyYm8wWTdvKzVUeTgralI0OHRMLzZDKzMKL2lDOFUrdks2clExSFFvUFRWangzV1hPSjJ0U2liN1E5bmdJcEJIS1JrU3RyV3pBWFpDdzI1YTlTamx6Nno3awpCNUVlUjJubVR3cnRDU3lXS3YzV0JJK1JxWHNkZElZWkkxUk9hZ1dWZHVCTG83RUErVDhqWkQ5L3BoR0dBMlN3CkM2NGRYOE13eEw0MS84MStkVjk1Q1hxNVlVSGZzTWt0RzA2dFZpcGZySC9vc3JOd083RVlMSnFsQVBJT1lDQVgKSGVQaWx6VGZsRE1xWUNMdXM1b2hNSzNpREdtOFVFRVg3MytjRzBZbmlJbjdUV0FmMytTTzZJSmczU0tlYzE2OApod0dudEl3TXp1ak9raytaQVd6eVh0T3g4cTBtSy83TndqS1FZcTJoNGFFdUhyNkZCU2g5dTk0RTllMkpJeklWCmNJV2xicjIyejAzMkZrTHZTMnA0eXdZS0IyQmpQamtXV3BiRS9GRDdiVytzRDF0c2pNR2RvK0U3dzBoUTRJYS8KYXY3TTRzQ256TWRaM04wbmxhQldnT0RYU1VxMVFRRXRRTUhVYU1DTU1ER1orM2RVVk44WnBFMy96NVdRNnFmQQprTUNJTXVFb1VZYlJxeDBUU0svM044VE5Wc3NoR3FPb0N0WjhYUlNLR284aHhLKy9wUlRFd1NYMXNTSkRCUzZRCi9iUU9PTnlKa2ZvUmMvVGFDMCtPclUwTDF5d2tUdWovMFN2OFFJdUNIY3hqdEZCdlVjeWZIWGNUVXRtVTRQbFYKa2doQ0h1SndIbENDaXJ3bHVURGkyMnVIT3lkc01kRCtETno1bkxTWXZsQzNxR0FaU1AxTnFubVVlSHcrOFJyWgpLdmJpclR4ZEVYTFlXeGR2cUxMTW9UNXpDZU5aS1VrMnNVMGU3Zzc0NFNNVXhrZjA1OFFuanF0c2tZOFNKQit5ClA4ZG1vMStaZ0JkODdFQXFuYW8vZXhlajl2SWlOV3NIZzlPaVRzVisxaEdGWFJOeXJIZFpqU0hKUkNVMDNJZDIKbzhBanNLdHVOa3BzTzMxSldjYVZtN1Y2Slg1SUd3TURLY0V6RHJYd3Fvd3hJNHJhWXpBa2NwT1hzc2M3UDhyeQpNSnVIeUlmblJ6RytxU29CYm1TdXVQODlza2QxN1BsOU5od2dZYVZtRGE4QU9iaUd6Y2FJQXEzSzZiUTV1SnVVCkZweFNOVmdheDBtQVN5TnhUckZaWmtxYmpxZ1Q4d01VcnphZGpOcW90R041NU9mOFRGa1lDNHcwTXkwUlEwMEgKZmxGaGlSd1hodTZGTHhtdlp2MlhzT3QrQjhJZWZEN3RUS2YyOGZMS3JEUHJad0FqNVBsRzlsdldOQ3ZDK1paYQprbXkvWGZ0MTVhODhtc245V1BPamRScnVWZ1pPVnl4YXVsdXN1U1BsMHd3UHUrSWlNK010UUdCNGpFQUVpWVR3CjVNR2lGNXE0RFdaU3d5WWlsUUQzUEljZ3NqYkV4bEtVRWNDUEhXbTRteGRUOUc4UVJXU1R2TmFTWERpM1kxYkgKa2R5UzdPd3U3R0x3MFpzUGpLN0xMbGlsV2loanNLNFJhOHhlWDdNRjYwNzZheU5XZ1dhNDNkSEV4MmNUNENMdQowNkc3VlJNaWxTMjg2V0g5NThPWmVocW9Oczd5WktDcU1sMmxuQ3B5RXZIeGVWbVZ2Mk1wemlvOXIyTHdyeUdVCm5LYThNV2VyQ1NBNG5yNlJ0eDlVMWlQdHh1VnR5UVBpV2QyeFp2azVGakpGOEZLQVVqTVVQZHFWaUtIWmdxNlkKYlpCSG9RVnMvU0oxb2hoeEExMndqN1hzbHlTcnh0dVU1NEFTL0czeFcxK0JxUEVzWWozZyt6cXJkRzMxOGJDOQp0alpJRnI3RTFYN09vRENoY1Bvam5tQlRyay9WcmhNZlp2Y0hFaUIvbEdUUkoxdG1HbE4wVjFXSmFMNjFDSVlVCmMwOW0wcEhWV0IvV0Frazd0emlQL1NCcUovUnVXaG52am8zMk11TVgzc2ZseEhqMnF1aXZxOUFEU2xHbnpLR3MKci82RmozeVpGMkdrUFFINy9WUWZzV2RZWWt4eWpzNTltSlFiUU9wR1hOck52Nkpyekp5L0V4dndTaDBRVVNpYwpOc2NkZkRzVUw3ZnEycy9mV1RYQXlVaFZ0ekpPL0JwNTJsM0o1NGhOSVk2M0FNaWNKckNSZ2hqQmx3OTgvZkNECmdOK2NtUlU4YTBHZnVQa2xEVjJzc1ZqTHNzR3R6dG54QVF2QWNjSVVhS3VRTjJMb2ZnaDRsYWordy9qWVlGbGgKQlJ4cjduUUdKMWl5QWxzWm1WY0RQaVNGL3lodVRVTjZkdjIvdFZFbGJJQWxsWkxubHlXTHJIOGQrVEZCTUs1OAoyWk1IcFErYysxMjFhRmlIYVgwODJrQTdSa2pBcGRCMVNIcnVjRXNtcHhZSEttdkZTS3pYVmJUa1NRdy9mcHloCkxwMi95aENpN0dWaWgvbjZBNEs1dTZmcXlyK1h5SXUzZzNNZHFLMjRETHRTWTRBNlRmVDV6RXNDQW9TZ0c0bWMKM0tVS3Q2UmVubDNuVzYvVEZIQXlNRyt6ZlE3L3JXSGd5TnB2TjB0R1orZFo0S21UM1F3TzczRTU4VGxjNE9lbQpBNkx4S3B2Qi80Mnp4S3E3WHRpTmUwejdyNEpjY296MWl1Mk5yZTIybUhsNTYwZFpmdE5YOTBDUFMxdGtZcTlRCjlSRDdsRDVUVE4wQjkyMnNRbEIrV1ZUblBuUjRFc3lEVTZ2QXA5cGJncWo1Nzd3ZG9ZSXZKVzgzY1V2MDh4VGMKYXVCTk1FaUh4eHRBWnAvZkdGVjVTVzdZRThxSFdiRlVhK0VjQUIzMXRwSFdjNFdyajdlRXMvWktyL21BaXJQbApub1RIN0xMb09Sa2pZanJQNUdKTG04WGVaY3Z2YUlHWjUzb2hqclFNUGFZcXRFeUhwQzJ2OVZINjJjVjZ2U2FICnBlczRwZlRweXRXUmxsM1p6dEVRZlVPdUJqUlJ4L3Y4aG9nTW1Qa2ZzdFJBMVltTXFhK3prV0gzbllGVTJwQ1oKaE10TU5MaHIyOUFJNW5ZbzRmTXI1aWhsMXloZTIvMUQveDA0Y0dFcVNsc3FTTFNjV0lGblRycHVmSDhEdGs0SApwSTBqSXIrYU5zSS9BVWpqVDFjNWZMZFZBeXFBL0FlNUlmR1laSzA4cjY1K3BBWm5JVEY3RUh4alA0MTBORGNICkpOOEFSbWo2cG5ROGpNbVBmdlFQRjNERW96c2dkUEJNbDJpdFdSOElCK3kzakhYdWxyU2dsODlFajU2M1djMWQKVjh0WjY0T0pSVEYyV2Z4akozWHhDZHJyQ2dCS3M4YUdOVnlVTWlvMzAwUUdMZ2FIQ2NZWCtLMkRnbDFSaVNOcQpjSkszbkNQTlpHanRhcFBuSE1mQk90TzlXZGh4NmorQ1dZNy9kYTM3VnpnTjJiakMwMDRkZHVSV2lHclpKUVJnCjlFWDU2SFRsRXVuS3RKR1ZFL2h2M1VUMlNxenowQ3UvOFAzZ3FCaW5YUTM3OGh4YitFVENXaVdjVHFiYmtxUXoKL29GMGV1eFBjeVFGWGxmQTV5Z2VaVmk0YStTODEyck0xcVRBY2NNVGhnVXYwUWNyUmcxNmtwWmZNNVJjaklkWQpVcmhSNkZRN3NaZDdGUVlkeWljQ1V2M2Z4eVRmYUY1VzlCM1V6bkxpcXduYytKbTFBTU1WTXJ1Z250WGRLOVJ1Clo1cVBGVVNmV051SERMUFZWaXlOTVc2b0w1ZlEydDRCUkpnbE9Fdi9hbVJ6MTdrVEwrWjFLWXVscURCUmFiUXUKRktUQkQxZW0xRkdDYi9pcURlVmI4b2tmZkFLdDNGS0NNdHpvdHFZY0tGakllOU84VlNUUFExVGFHQjVqaGtwbAp3bXh0YTNzcFMveDNQZktpeGVheUk0ZjlZZEpCWURiSUcrMzB2L01ldlhiM1I2YWlDRDV3dU81Ykw2RnFpR2RLCjBzRXhqS1BvUWpyY1BRQlB2eWZCaXNWSEF2VC9aVTVBT2gvdEdSUjlCVC9oZUVERTdEaWM5M1o1Wm1SQklwa3kKZFhZYW15Zk1RRnVtYmxhOGVENCtpdnZaYmdRUzdNdVRIbmFGTzhQTjlQeTFaUzlVRnA5eExNUjhtMGY0akJDOApCcFViNG1MN2lheWlYVVltajZqOGhsZ0k0QmpZRHhYNGo5QTA5Ujc0eEJMUmZLRVptN2FlaGloaXl5T3VUL0NJCnAva1BWdWh2U2cvamJJWEdmeDVkUHMxc3Nwd1FOenZUSnZQUGFIVno0TjhlWHlQajhxb0s5aHZJUTFzK0hhamIKVVZzaDNYbzZyRTZqUWJPUU95TkJPVHI4aWtTWm0zN2ZDZWowWENMaUIzeEk4eXJXT1h0NzhVK3dxRmVxM1FLeQpMSnBHWXZGL3RTWXJ1aEFrL2labmJxV1paSGd5SjVIeTdzS2FXQkgvOC8rdzdRZ2N6dXpGaXZrVEg0cS94Sk1ICmh2Vmh5bXRxSnFXSTJQVVcyT0tLWWVJS0dlNHhUOXVhQ2xFTWN3VFQySTY0UUwxc2JKQTRRTmltbENQL0JVMjMKbCtqNFVaNlNjL0ZBYXZBSHJRWkQxVVc1ajlkRnhROFF4ZWJyM1J2VTFWZndVODdpWjJRSjQ2eHJ5V1lSQ2tJQQowT2U5VlRsT1N2RURQVGRTcmRhelh6Wk9SSlJWZllzaUlnZ3JmUzlqMzk3VzFER0hzRklhK1lCcmpWbldrbUF4Ck9mYTMwVVJkRmVjelNrTzNiQmZ6WEFWYVpZUkRJVk45WG9DbUh0RHVsZTRjZ0RScmJrbWtGUFBOUTVOR1F5M0cKa0YwZWhBdTJKNlNkZ0h5ei9iMkREYUxwZGs0clI5djR4V2tHSzdCQ2dEb3ZEbkxBUUo3Q1hTc0hsZ0RTenI1NQplamV0eTdvVnJVQlpSa1d6NzdPRUc3Y253REJuL0RoVVQxRzFzRE4yRGx0SUhvNXBxUGJZRVdtOUdWQ0pyVlRHClBkNjU1TE4xTHIxQTdGUXVOR2xCU05CMXdUSEFQc2pQaHA4MTAvR2gxd1JwZERpbVk1TlBjck02OGhGQmx6QzIKQlZUWkRRc2xSWVY4dWxWMTNWUk10aUd1WTNFQVZTcFo2RTFPR282YVA3RjAxMzhYSVhCYm9WNFJZd1d3aDVTVQp5RTZobThUNU5yOUs0dXZYcXcyUy9mNzcwUFR6dEFDNGt6SU01U1NvOEF6Ritaanc5akpqVjhLRkVqdmtZZk05CmdWYmQ0RFpoYVd4UUUvSHhzb3orREhmMFV4ZS9hU2JZcjNzV0hnclVRbEVZQzBiYzhyYmdxbVlwRmpSR2M0NXkKYXFpMlQ4V204UVZFY0hha1Q5QTV3djNveGI3RVVCT3krUDBuMnVjZC9IZHE5ZlluTi9kN0FXRW9CK0JQdy92SQo5M1N3Y2toYXV5eElHemtzektzRWZCTTZVQzFpSDl2UVhHd1RhVDZ1TXgxdk1DQnYydnMxOSttOVMwczJXajAvCm5zY252alJDSmVGNG8zemtQd1lGd0E9PQo=" &&
        eval "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
        mvn -B -Dassemble -P deploy deploy;
      fi'
  - name: "Akka Http [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P akka-http install
  - name: "Akka Http [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P akka-http install
  - name: "Apache HttpClient [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P apache-httpclient install
  - name: "Apache HttpClient [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P apache-httpclient install
  - name: "Apache Thrift [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P thrift install
  - name: "Apache Thrift [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P thrift install
  - name: "AsyncHttpClient [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P asynchttpclient install
  - name: "AsyncHttpClient [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P asynchttpclient install
  - name: "AWS SDK 1 [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P aws-sdk-1 install
  - name: "AWS SDK 1 [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P aws-sdk-1 install
  - name: "AWS SDK 2 [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P aws-sdk-2 install
  - name: "AWS SDK 2 [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P aws-sdk-2 install
  - name: "Cassandra [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P cassandra install
#  - name: "Cassandra [oraclejdk11]" # This is commented out, because Cassandra does not run ok jdk11
#    stage: test
#    jdk: oraclejdk11
#    install: true
#    script: mvn -B -Dtest -P cassandra install
  - name: "ElasticSearch [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P elasticsearch install
  - name: "ElasticSearch [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P elasticsearch install
  - name: "Feign [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P feign install
  - name: "Feign [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P feign install
  - name: "Grizzly Http Client [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P grizzly-http-client install
  - name: "Grizzly Http Client [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P grizzly-http-client install
  - name: "Grizzly Http Server [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P grizzly-http-server install
  - name: "Grizzly Http Server [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P grizzly-http-server install
  - name: "gRPC Http Server [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P grpc install
  - name: "gRPC [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P grpc install
  - name: "Hazelcast [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P hazelcast install
  - name: "Hazelcast [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P hazelcast install
  - name: "Java Concurrent API [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P concurrent install
  - name: "Java Concurrent API [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P concurrent install
  - name: "Java JDBC API [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P jdbc install
  - name: "Java JDBC API [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P jdbc install
  - name: "Java Servlet API: Jetty [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P servlet-jetty install
  - name: "Java Servlet API: Jetty [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P servlet-jetty install
  - name: "Java Servlet API: Tomcat [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P servlet-tomcat install
  - name: "Java Servlet API: Tomcat [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P servlet-tomcat install
  - name: "JAX-RS Client [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P jaxrs install
  - name: "JAX-RS Client [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P jaxrs install
  - name: "Jedis [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P jedis install
  - name: "Jedis [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P jedis install
  - name: "JMS 1 [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P jms-1 install
  - name: "JMS 1 [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P jms-1 install
  - name: "JMS 2 [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P jms-2 install
  - name: "JMS 2 [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P jms-2 install
  - name: "Kafka Client [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P kafka-client install
  - name: "Kafka Client [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P kafka-client install
  - name: "Lettuce [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P lettuce install
  - name: "Lettuce [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P lettuce install
  - name: "MongoDB Driver [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P mongo-driver install
  - name: "MongoDB Driver [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P mongo-driver install
  - name: "OkHttp [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P okhttp install
  - name: "OkHttp [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P okhttp install
  - name: "Play [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P play install
  - name: "Play [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P play install
  - name: "Play WS [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P play-ws install
  - name: "Play WS [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P play-ws install
  - name: "RabbitMQ Client [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P rabbitmq-client install
  - name: "RabbitMQ Client [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P rabbitmq-client install
  - name: "Reactor [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P reactor install
  - name: "Reactor [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P reactor install
  - name: "Redisson [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P redisson install
  - name: "Redisson [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P redisson install
  - name: "RxJava [oraclejdk8]"
    stage: test
    jdk: oraclejdk8
    install: true
    script: mvn -B -Dtest -P rxjava install
  - name: "RxJava [oraclejdk11]"
    stage: test
    jdk: oraclejdk11
    install: true
    script: mvn -B -Dtest -P rxjava install
env:
  global:
  - secure: P/LP/83sZCVr7Tx3PiCpCxMsvijLYrpUCKpIpskY9fWM+REO0fvKpstMcpcq0xA11D1OUu8BJB/sxi2LJ2GMQI+cQB2BLHJkVN4T9x123dAgXtX/1cvqoFhu6cu3uYOFOo3hSvjdaglkYzp3OPlPAL70e3YD3Nn82Xs5/IdB+5VE8rDH9qQntOVtTLxQuRtHbUcr/CVMlXAl9ToA0ylYv1kJwparSVEplSoBMeo1yQT6uF0m3X6VdhEckWqg2APjNhgc1D8zoL8r1I1b7D+bX4XdgOPJHqzeL3UaAky9N2SG7hlDhAm0neTCmGlZ9mZAFzF+0QLUGtBo1yyoHxGIRHpv1jQp+fXyuslkM2QAZhVGZG4FPNX2r2p6FZeC5AhrZvay2I4mffb3WPNWXr3tzIJyzCV3yLNBIHHl3ijNDPoKuR9Q9FA2d8oPAb4hVAS8sW0vbk1qstPTAxzj1ptJ81ggR3RjkZr2U5y8p+zynhz2mw+78Ez4drq4LEchjvJ0OuyjPXYj0dHisBvjfGOINQuOWipG5KIhQOUaYhg4vvNAvI6iE8rucmgT5TIpcPIRrzs5lkgI/ZV0IG42ChJqXv6z3gSYYIXHjtO84TG+3oEO13z5FFFsLObWPKsfVQHoWcXQKXc+tU4igmZsMli239YxAHyQ4y0+MdVLoNM77a4=
  - secure: W7/zJj9Y7LzjA9I05Iu3kUeAsBlPRvRx/S7398CT6nne+f0y1NX+5pDYfvQ8PjKjAm9PyIb/3qMoCQPwmJAnxnYUcaHrTGUb20ZEOYdLv/Um3zy7ohLZM/tM8qDSPb7OVaP/tBZg4iB1MzOtHBSYg3X8bGeFoSnfxOlyIhLzuXCL2fDG+XppeVDX+0na9l9zr7gVO1dE/K4R6VVERLhmWNV02TNK+m/J0lD5HyLh9n0tVN7aOF0xuiG0aF3ygl+aceuMudzrXqusYOoyGr5luceEYAHtQkvQKzC1egb2G25gJQ17NnO1/gefE0rnCew/hzxwTlL+g978QabO+rqNgOXbzJij8ZdAkPPaZQcVPKY6Ji1jNG/EA3iVHAtITc7rGOj4gvlkAXvuVBubgB4JPMPl08QJ6mkJ/H0OpDCCfOLCaHMo5Yzk8ZF6/+EDZKEbzL6+fClVhNX3XD1u3UukXqaufpUI6eROzzB4i8KlsVD64XoVMyDJ4bkmFWa+tvaBByAPc6P3aHIqIzkToOsaVnPRpndCaEiGCGKRpqDdTLnd10zKCBIs1+my5ue5EsCoujGxZqnIw/xs5AqKDEMCYkZH/egK4uuuu12CJwwXfmh4hxOo6Ii2MsD6/6tAWBXQMSITgpdyQcuaq0qb6yd9c8tPwjdiLJQeIJqd37zOZec=
  - secure: FArv0JKSsvrgK0JLdGUNe1Yh79fRbIkA1aQDOoPRjupthb8h9c6b5SAaSZE82d1tjpD8TO/365H/lv/wiWN+f6U0bSn3CsbbyUWKSNIwW330sb6GG6Stqk4UF7pApN0LX6hqyfs95hcHJ8x6LBVwvDYxJja9l0hmxfIpD+7plAebKJxVTyi6PVa/Hbo3oL+DvL2l9HeFiMCmFNAib7RD4GhB+Hp6V/uphGCj3iNknpoo/jriUST0RvYWqu0arWrF+i4RXYHzFNbXabVKatMRv+HUAg3yciDXLjmKULBkkOicl+eu+iQDzA+Nx8M5D6NBdHH31BliQtI7idlhm8ZESBK+KiCiTPfBEvBgwubWXtp5xeHS02apIrW7VIpZht31KYsp0wNiuIE0Of3C9c0JDNyJyq5GTPM0CbEI1mXUnmWGTpMOqiOnq0J7pMxn1wTwfmTzdsJZI2ZhSEovlR2C2/pVv4vhZzFAYJl1eaboaDtebWYsV4yjelozFtHZAG2lnQ+b3xz4mjnYlVY2hFmxIbtLGL9nDy4TmcgedcL5pz+bWQdlXG7o/MmNhP+L7f73gRvjFkIicVOck73c7bnUsYLgxYZUrV6dTSur8TIfU5kkd1LE/jQ1WFShkmPP8bcu/Imjz7UPu/t9KnfDeyDZpfrprKYtBajok6v+CvIa6IE=
  - secure: eQvOmVY6iwsuAyjOV059GGv+NberCShp6sgTHCytyINC4d0TT0divJwEoX24KiEat2h6xe9nt928x4QEdTu9e6gQizxzoUF9X/2k2TqOIyKw8rzSDTz2psqQNwt3GDxIJVH9cpkd19X2zIlIqiP90uGHymgGvvYRJdIyVte+mioVN8nvNLjtAgxrlrUG8rFnTKox5+2VP6DOmfl/g+RRs+Sy5C/yGFWhZTPnxqzil0G4+TNL5cZThUmv2sYzzUNWUOgxmuMan0cILV65njk1ZvPM4aMUBSVC0tA1tPXjenpqORhftu1qcmgKjh9iptS78Pp4f1pr1dhVddjoM4/5dT7yESdW+RdfYBlMOv04E4smFJvvpnCgquPt9O+Thb2oNvHI82QOTOxYic4/WpiR1Wk28tvlEH+rn2vx5hlSZ5JIideEKSxf9Vc/IIpqW+fQH8qh0rv3uetTnRn25LBs//q2tUukcae/bLpKkABHws0zvxIKKGL/Gds7WCA4MXbZCFSxb6kFn2w0maiRkuvrlixe0lglbtzBsbn/p58VD1eXt4yIDVf5SzX/RtWXBauYWpQ4RvjbmJG7KZGX7MbfOccQIS+NOzz0gzVHqyq9lts8fTjsBFG3jrfH/H/Wti4wuVdUY0/PbS/0HjK9etqiGNKiUQAZzo+njIVntgEuNpc=
  - secure: d92H5QfGFGFuBdUYmHB9zG2N3e+rsrXnB9sI15lAw67W1pGIzNE95m0YzU5JZwFmwXObiLEzDc/HE90SoLBHrY+3WarouJTorFxQjBQW5XMt1JyxGy29gjqf29tX9Ii03H8Lcna6sSGgBeHjiopzx0vaSwfIdUcWYnewwJoMPzWLdjrEAQZ7v50yDkIyPKGjzgJeo+LZ/M7Ew1CillQZVIV+oRxDF42q3yJOb9pRi1f/nDwzy+i/n1P9LfL7b4lcvHMjsA6GLkYwzuf54XwMYqtfnoX9nUtGUSVYoOrylBUJ4uhmE8YNRyaxTkz1i3qSN7wA6ByxI7zDQz87nNoXmas0KcVSGpAJsJKwm54qCBqBGChIZ8zlLNvHGRZ5YKj3zk/51yAUUjW6St4aqksHVkVvI9VvntxrePbM1k5jA3Mvs5+MumOIOz/N4/KQY16i+AzBtSKeQOkWRo93AO5gV4xEvxBegXQPfWxq0FA3M6xdXOjtJMY8atKKCMlzhOZGMoVfvn3+bkzsQyeR4zu1p6Gg3vmd1juy+VMWXABvjJ/03qAVtst0oQGmvLRwDgAx2u3LsoYnwx4GWreM10inf68QrSYbOAbc0zMz4P/3Whc5sr/zrNv73YjF0eJL9fi4P0ZYetQS3bV64JHrm72hpIsm3qLF0QHLuSPibEdIenw=
  - secure: EDHP8+pXMMuL8xOQlDnoZpI4c5vdZopIXK+mugAA22oUD5p2U0CTzNArowM202ixaB8LgnqcBV0LIKYxiSMJg9w0l9n9Gj8LVeNu1WLXZmBK8wAnSdAV2NS5fmBWVMXQBQY2dhXIf8E3SeKXpdlbX2lOEuD2zZtykImqnKW4uUSb5+BLf4DFA+a6TEFIDEz/qXvZa+hs06tf/V6/G56H1NM0DvAtV7DdncY4PI8leoHngYu07JeYPoTsp8/lxhWZuOv2XogdYs9Effb2RJJHE3IvM52aZxz0qdva9pvg2X1gK3X+yay7BksbTz6unGrA44FUd+9z6CTUMYRk8C2liib1K7rXhw52aBKlZZKCYT/zN7VJVadEgnNQzlCAkN52BjrcNOsz//mgdOVPpWIHHD/IZ6wpDai1S8//3jy8JgfaBilknk6CId2BeurPUNPmUE1nmU3+ysFCbpDsTJnt0fx2ZZlybilwwDN1NOw3VJDK7TVtqX/8N21Z/lLDWPGC7BxEbpgd9XD+ES7uA84lpLJ4xgBvFCaZleaNuK5EpcyJBVncagCCHEkPb8hiyLQkfIZhqKe2g8gJhWiOnigKleh99SHj8sbHF3fYjGMlUov1VaSFMPUQbyDrsz0NxZ2UWAetBjpcfLCD42O8SlgkCpADKkgkdmlGFIJFGcOVHNw=
  - secure: NqCL/m9n3sbFi1lXya7uL3kFsal52bZ8ywHH3vcrHL4UbZoHvG3YOsWfMwg9qLmIri94HfexySzSY+XtrArKZezVPgBHdDxrU79/Nr4Prg1x3TJW4m/EQdBtxSIh2tZZnIEtEdZurRG/jg93KDCZazDEH87W4zztiOmdMCRfP44vOVf3fX72D8UI8OY38bi2g4/eDT1gKyaBuEAtJ7a/6T3JUywBlm7LaCHFGcoBaU8sE9DHBd2j0Ry+Iu+eOJ8fp6Nmll+uMgshHNNyMd92PEKxQ/BWsSEX5ujV8dW3ROUoTm2Lgje8AmfkKy6lkf4qo7O9Rxz+ZTFdoHjxHzEnA481U1YScHdqlsAkPvziVdtJJ1jFF8wXP7rW8SqwpJyt0zOH28XTFn8+KIzZqdtwSGGzEK3Ptre7GKOzhu1n7/SPY5mWd7f5o/PIvgcpycIBXOr1xagMYaRJ5bohfnK6wF0TxF8beNABhUyjSRY3GS06p7KL7KsTxksXcIxgleOVAeNX4wbStsPQjeTnXNQtzR2e4xaAZv59bS9ZLng9K8NX7bmmz88AH4rslgqCm55zNJnGrwmCEtReAqsl8nVKiFlsWFtFze86vY0QNhN0h11g5JQ3FLy+mdsgV+n2tnmYdEQR44Kbfgxzb5uefDrauSuB5zrU09PHyDIszQzBjs0=
  - secure: E9a6B6pDGAU6xXMrLT7udRhtNob+KSAycMBwzigpYXkzUbedsWC42ZW/jodXA5a6tgCsTjWVjFzxYx74CSTYEo5LRjD950XbB2mY/L1C8MQbcrhbKg95IzJ6AbHz9JhYEabmu7YA7JjaEVLMbbudlsDVVxeVqpni2tzkO5DtvWMoCGwSPcQTjujdIdceUDs8uRQyt/Qe6Jrnjv4RC79+TbvHiAT0xM5BT2AqXeknjVFtKFa80Wf5BT8Y8Do0GvFUpkMP24ev7OrkuzWCbsH5oBOwu3EB5uNzvqfVSBdVg5OIv/vlSCiigUuW+uYeYZzSQmiK6QTrT77EZSZ7yXRRaYOB91+7fh4tSvXrqeoqs2Ppt18CDOY7etkQKVXa5cZcIRAYxhVgw5oG3cVG0LyeOjzWgqCvNSmEhuf5EHSISk6scGM2m6pQusySzYIcV07h79E9HiAc2CtM/L6mQP1Hwjah0m8EHMPylvyBQN+mKDf4vY/TcHUubPHqCGw74OipjJgwoKUUEPE/ANZLcyk4TLVH2CWPVQu57xoU4W1c7LmFCLUkAwrNFNmoYZVYo0S99DKhcBxMfSmcyXyjODsP5FQ2oM6CFqAq4R21j/NmWAcgrY7JKZ9UnpN+kvUkkCA4yG+bdntF5s53EVf9jlawZut9UBmLdFEqhNEwSfRWNKo=
