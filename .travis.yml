# Copyright 2019 The OpenTracing Authors
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

language: java
jdk:
#- oraclejdk7
- oraclejdk8
- oraclejdk9
#- oraclejdk10
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/io/opentracing/contrib/java-specialagent
script:
- 'if [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -DrepoToken=$REPO_TOKEN -P report install && mvn -P deploy deploy;
  else
    mvn install;
  fi'
after_success:
- mvn -Ddeploy install
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: TgxsvnEY1yqtuFMEbgAZ664HCqMHNtpFbcusk/Bz6uh9/Ywa1AQi/t6F99JdLMeq50/uM8VqgBBoS4/b1kYXA2fJhHCoHG3CxfRPFdqnJ40ECB0iWoElf8lLuseUiyqVRivMSyjjqqIqD/0YKUlyVcy6aQ/xBHTAtUW7HiuP2BauTVAeC2meybVxrRDF9HAZq3A7tiv2xqJHpDbMakwII1+vUVKs+VCngWo5PMfpywtYKSyRyQ+ut/JoosGbxX7gWnknK3qTp5k3n9neE/nvdWPTrOggcKEti1Dw8W73JTsDUEIgTOl70wPv56A1KvZZMmihUrjMa3jjJjd7SEHzCk1zwHmpEOedSX6HTbheNmAeoyrn8UTZOitGVuTn04fNcM+ZrMGcpxfyMODDEbcqyVvvaXr46M7TWoYoXO8e/zRjUE2wGSlVUcvEjBDvIjNbPopj+L7ShuarXWhRRMNzcHEjFfb5EKD1wYcXJ6DcXiWKUgQr/yr6fzPjZPNl91w1q8XD57+xwztjf1+jZ+inhzf1+84UiNbvNcwrk8OcAaRMnZX8MNA38VwcyaDPLn0/vNP8z/KDCUkoS4wQEFyqQJKZi7b5LXihmjypYnZfHWa5LjSb1WKkxUyqPgsTyKUiGQXhtCoZhy7yGAiO7+ZcN2lfnhxHyDwX54a920VxqWM=
  - secure: DOlZovZPc02nCpZ9SeZ/jcWV/uSH9E3UOdUgsx5RwQyxGsHrxh8d3xp/mh0JCqN227/y8RpXNOLooqx/vn9ZOFWCnUArbqLsfadrlMU04VcyEtjjHe5tXVFlyQh5y6KQwvjktUWKdbKyNHcPjBVWpR3jOdfmcsRM+5R1DjWZBWuMqWHET0vVncOafsu7hPcC483verM63Wi+xorpjji0qCqNosnH3+UjJlAqAkyBTIiCW0I1xtoo4eibmRc2jybMU/AIShDOezDobo2oZ85F1NwHuIICR9zgL9sfwvJ+gLMRDBJnqh++RDbpoffXXFDewcuYVASIZRhUTKxta06qI+9UzhtFE5v/kRt75Z34OdO7WAJFPRIhwmQZNm04Z4ozrjFZXbjG6INRQtV0LCKGLKSJbjCWRn6PZ0HSQLquuxqNKFyCtZrl+AyRMZQ1uM9R7LssTTMD9fiEGF+LClHJaMzPFIil2hkTHOZOwLj96Qi7QMY7Ipoa40fqRb3tLlFFxW4x4S58cU2yFbfNbxJXuBcCXBIfpL574hvu5uf4WOLycfC2lKh7TAyesqmAC8ksbKIOj/FSiv9qrT9Dd3jsM7Bn2YAzNYj9JMDNxOMdfUwhWHecwBsUBcNuLPuHPOxQqm/2+jIV9HCzqQgE6pu3HKjz/MTrh4JoDrKAwqlIKX0=
  - secure: hYkMc/ZJjRUVVbIuZ7l5lLcyozdqJnrRhD5gfShfcqSNJvFw85T3ED9i74ODq5NLj85v2a0mztsGC3BvVzghiEd/YyNB0DluSIC4qDxqydZ/8OIJwvLntz2+DW0yKw0/+NA8DdOjhR50qWD4+s9/9sCXvs2uO8/+UZeob+oIlqcl86XIetbjWJ6RaO5NgdreQ4mFwNMUfOFrMbbRbvT5/lpQsQtctO+Iah5MBvZoZWBHFvjrFbu3SUB32E1OhX42Pm8EfGIjnx4lePfP6Dh7ACU/54oLh7UfcxB/lC9c2usUgCodQo4GIW/Iv6pfAJO+Bfumwa7oRh45/QRoFZySNFquzc4Mcri1wY2F/TOQAzGoTG5MlGGrPlu05kHbSa09Q1gPAt+C0X0PL9o9x+rI0s8QDJuDo4VZKngKAGUB0Sg6StLNMhMwhWf9Bg9ZE4FkyexS5XwaO6ijb7u+8db15tWjVop3DlSHRHyDwCyP80kke4vxHbRdIe3bwnldv6P7f/gqNl72cjJTv3Yjx8Led2uVjH+Y0SEPSZcfBIBQndiPerT91rfL/CHMshViqho2vG4a7neI2yoAU7BxKdCCqgK/haBvM+LD8ITln6pdeP4coHUDzKcOvu04NCVj3YGyJNIyXGidlKB1RW27ZIS4rQaFw65RV3O2Nv400i5/GVI=
  - secure: PbHG7bfYuMRadS5qvbHq6GnUAfQ62aPkarl5hnArIMODEDNzTtE1ZkVQxvCoZnrCVYpDgeKx0h79Yfl9KTddxtDB08+ESixIdNiM/MptiOeGMw7khZzcnYNVObF/gvnBc7BGoudLDYvB21cy4oNUoW+PTZ3BX2+elpK9TlErH1Wncf0g392GTeNGQXZqQxlYvb0qTydovd7h121i+ZWFkHI1rIhicCE0J/MBgX0Mxz8uuLwSnFTs/xhGkqlz6YVKgyCl2cebBQVxPFHl2/7QNUHWwYaTjD5iNcqezavEDwRkFS5HBo68RsVUJl7+esfsXOuAAmaUQxHyK34OcVtwn2c47JRQdbQxGveegTIZIMFDtcAT5Kt1wK2rM0TEzdAJ8LIM+W7lRzSyU0RsaMMnkb7AhAHdhtUS1jV+83Gf5eBc2aSIUdizlh6/PxFRTGKsEqiu7KDI9pYzKZ5+fLhYVsTVM7yCIrVJq+ahq5M6JAt5s7c2M9R9K1z1A3bqhIlsOKLVLEsfUs5J3iY2cXFHyHGfZ1jCCUZTtyMDir5GsqCaq34D7az/rwAqT7ViMvIBOppkaBHvoXG7zkVdHUckoxF0xE32UWEkNfRZo+AMn6t04P2JvHKGzqtHsutsHaVAay2LUQq/YHqHFLlCOTiqcNRtK0z4ly6Jr7LSeFMMVh0=
  - secure: MOlHWZcTB2RzGBfJIytMfeEi7Xeyx0SY/g6KOeLHzVTq14RTF7rPfOc0VAPU9MJDUEGuzmJB2kyyXD7Ys0kAMWdPWhClBMDcoAql9r7JmnL+rajB8pCbmvNRlKQzV5DFiiYFkOd5Z3x46bxl4pC3KeV/JWtrzEZkBRfpSmoMF/jk31tkSTGGCX3JM1QY9CmrjPwp5OXLm7Y5O9cARHnGGXTrRJYL2XD1zb5Y4Slxk2hDgCLQpWgmivpJ6qmRVhQZk5hYYV3zV7dIRwdpt+SYMcDWW/4ZcpzKBbQDOXMHfTq3aUdCshHpWkG4xM3C9nDSyBTSKi2mFo8IiQfdgNmoZ7eXmyUvfNfW/mlGYpXNqXAJj4nynP8uSJi1CTIOw4bgnqcbntPxdAmrHA9J3m7eJuh2d4EBEtq3dbGKWeskbwY+Zp1P0o/yZ79Tn6wZz0DaVi28LNtz3CH9YBmdmGo86ujiQNmyVPkvhuq+mK7BH8o2vZkMZ4zSgkOmY4WYw0ITIYeMOgac02D9IBpTYVWINerGBN0L3inyC15QpEL4WjrDrV8o1NNP9HCc/JQEMNa3vDiRblPKLVMidrELGotCYa6YNni77DhiXr2ir5zhNq1Hkji9xihYS1MWmT/ORNn4c/m1TsE8GI4LM8O8t0gqIh7GXhSNlQeCaxrTzUIoG1Q=
  - secure: d9Drfra+idmAQR1gJI7IdTxkwsrWccKDJkWwsZ81lDa4uHLOlk5Xbo7+/fAHPPVrch/H0JFU8un8roXiFArMrdZjtuvfvb4ld2AnNdtWsCnoZviyT2tZ+lzBvrs+JHbMMDtloAnyeCThrBdYHrXK0MQ3vPjdUfkWCmZEUUxnagA2I3joGogDt5pOjJhxTZistXnfvhelh68Z+DH7Rv94rmV4MC9CyA5b5L6y2lDUr8qPTnl98mF0OBVioqxWpKxI2bIjkshIiZKrb+RvIYlg4eaPvOn257j9ZDRGLFyzWcdKMRAM6ixXMayi9tRuxIy5QUQJ2rSY5pUOCpSS7oD2XvQmci1LFeDYyb+pC96VqyLB9v731zPNnN+bSFbPaJoUn1+4Ry/zZ0O83lZ8dx8hU6jqkQZfTJxtoe3S+X6lCV1ibNRsiAps8p7P9Gh/N7iVhZz6rsgGNOqnMg2+zlsQItc9qh76ARpqH+rLh6lv0v2r7GClgCueDBFOUblfIVeii1dVnbPaGJerya0d6MVtNqWnLPyjDT02lYxT18oB0MhWt8TUFRO8vibQL5nfanwQ3Km4w40dCEgGPZm11RccfL8QYmZM7CuowAntlrqcgYt26gxV1AXVPogFA7Ds3Y39yBkYdrk4w2e+5ZLjh+l7UcqKCJDIqwZ10Vi4Y0EbAnE=
  - secure: NiRgdJk8HnSQPkkzL7VfxXOlDG2DatRPD8EkT7BXMd9bvKiysVAUPl5UKMPz2q3PHPmC66yTy4MuQYBtFko1qjZqIPx575aZ7vJ3ZcJWDvQ3fO8rJAPXs11XSGnZ935zPgbPyhHBmQYiP1fK03yCh6163JmgfmX6kMTqiv5hVRpXuOhPSosxV9+bjgI8DE/HxFDiAyHYwmVpw0xiCVY8Br1rT9W+K7PcK9CdSpZSgE7eVOI8KQuP0Z4eKzYabCDCrqFBBy6SFp8WUI8cndQSUVBxCy4pBB7HvtSurgDyhs601u2sAE0UbOtA7SURp4APqF42SpN7P/UHSb56CFq59UUR5tytRuIUHo01Djgl0PWL/10oKJMzvvAYIa7aE5cPhBOO/zq/hTiNRviM+saqUIcgB58VNZ8ZeAUdPkyJS3TAxkZYhB1DgUlfw+xjbST7r7GAVyotz0CnQxpKy+HIs0VYEOKbJIiMP3WOcqivwUaoQ8vB5QMTarw/6Nisnnkb0vfSBnvRAqt73mwfp2B3nvrJsjNRPwNnpzhj+R9Ox5bYAcvtZveKLLAjUYiR9hhBBFswLEQZ27LmncHt/9F3XUr+1nRkQ+cUoymRIQ2cq4JU+BpmxHJwXy7keSbwtMzpOFYET7jXkyTJbcVbChGVcsIqhZQQSCE534SpT+cUHWA=
