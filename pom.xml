<project
  xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>io.opentracing.contrib</groupId>
  <artifactId>opentracing-uberjar</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <name>OpenTracing Uber Jar</name>
  <description>UberJar of instrumentation plugins for OpenTracing</description>
  <licenses>
    <license>
      <name>The Apache Software License, Version 2.0</name>
      <url>http://www.apache.org/licenses/LICENSE-2.0.txt</url>
      <distribution>repo</distribution>
    </license>
  </licenses>
  <properties>
    <maven.compiler.source>1.7</maven.compiler.source>
    <maven.compiler.target>1.7</maven.compiler.target>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
  <dependencies>
    <dependency>
      <artifactId>junit</artifactId>
      <groupId>junit</groupId>
      <version>4.12</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>com.squareup.okhttp3</groupId>
      <artifactId>okhttp</artifactId>
      <version>3.6.0</version>
      <scope>test</scope>
    </dependency>

    <dependency>
      <groupId>io.opentracing</groupId>
      <artifactId>opentracing-api</artifactId>
      <version>0.31.0</version>
    </dependency>    
    <dependency>
      <groupId>io.opentracing</groupId>
      <artifactId>opentracing-util</artifactId>
      <version>0.31.0</version>
    </dependency>    
    <dependency>
      <groupId>io.opentracing</groupId>
      <artifactId>opentracing-noop</artifactId>
      <version>0.31.0</version>
    </dependency>    
    <dependency>
      <groupId>org.jboss.byteman</groupId>
      <artifactId>byteman</artifactId>
      <version>4.0.4</version>
    </dependency>

    <dependency>
      <!-- https://github.com/opentracing-contrib/java-hazelcast -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-hazelcast</artifactId>
      <version>0.0.1</version>
      <exclusions>
        <exclusion>
          <groupId>com.hazelcast</groupId>
          <artifactId>hazelcast</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-okhttp -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-okhttp3</artifactId>
      <version>0.1.1-SNAPSHOT</version>
      <exclusions>
        <exclusion>
          <groupId>com.squareup.okhttp3</groupId>
          <artifactId>okhttp</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-spring-messaging -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-spring-messaging-starter</artifactId>
      <version>0.0.5</version>
    </dependency>
    <dependency>
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-spring-messaging</artifactId>
      <version>0.0.5</version>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-jdbi -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>jdbi-opentracing</artifactId>
      <version>0.4.1</version>
      <exclusions>
        <exclusion>
          <groupId>org.jdbi</groupId>
          <artifactId>jdbi</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-vertx-web -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-vertx-web</artifactId>
      <version>0.1.0</version>
      <exclusions>
        <exclusion>
          <groupId>io.vertx</groupId>
          <artifactId>vertx-auth-common</artifactId>
        </exclusion>
        <exclusion>
          <groupId>io.vertx</groupId>
          <artifactId>vertx-core</artifactId>
        </exclusion>
        <exclusion>
          <groupId>io.vertx</groupId>
          <artifactId>vertx-web</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-cdi -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-cdi</artifactId>
      <version>0.1.0</version>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-apache-httpclient -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-apache-httpclient</artifactId>
      <version>0.1.0</version>
      <exclusions>
        <exclusion>
          <groupId>org.apache.httpcomponents</groupId>
          <artifactId>httpclient</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-hprose -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-hprose</artifactId>
      <version>1.0.0</version>
      <exclusions>
        <exclusion>
          <groupId>javax.servlet</groupId>
          <artifactId>javax.servlet-api</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-thrift -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-thrift</artifactId>
      <version>0.0.7</version>
      <exclusions>
        <exclusion>
          <groupId>org.apache.thrift</groupId>
          <artifactId>libthrift</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-interceptors -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-interceptors</artifactId>
      <version>0.0.4</version>
      <exclusions>
        <exclusion>
          <groupId>org.eclipse.microprofile.opentracing</groupId>
          <artifactId>microprofile-opentracing-api</artifactId>
        </exclusion>
        <exclusion>
          <groupId>javax</groupId>
          <artifactId>javaee-api</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-p6spy -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-p6spy</artifactId>
      <version>0.2.1</version>
      <exclusions>
        <exclusion>
          <groupId>p6spy</groupId>
          <artifactId>p6spy</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-spring-cloud -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-spring-cloud-starter</artifactId>
      <version>0.1.13</version>
      <exclusions>
        <exclusion>
          <groupId>org.springframework.boot</groupId>
          <artifactId>spring-boot-starter-aop</artifactId>
        </exclusion>
        <exclusion>
          <groupId>org.springframework.boot</groupId>
          <artifactId>spring-boot-autoconfigure</artifactId>
        </exclusion>
        <exclusion>
          <groupId>org.springframework</groupId>
          <artifactId>spring-jms</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-redis-client -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-redis-jedis</artifactId>
      <version>0.0.7</version>
      <exclusions>
        <exclusion>
          <groupId>redis.clients</groupId>
          <artifactId>jedis</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-spring-rabbitmq -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-spring-rabbitmq-starter</artifactId>
      <version>0.1.0</version>
    </dependency>
    <dependency>
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-spring-rabbitmq</artifactId>
      <version>0.1.0</version>
      <exclusions>
        <exclusion>
          <groupId>org.springframework.boot</groupId>
          <artifactId>spring-boot-starter-aop</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-jaxrs -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-jaxrs2</artifactId>
      <version>0.1.7</version>
      <exclusions>
        <exclusion>
          <groupId>org.osgi</groupId>
          <artifactId>org.osgi.annotation.versioning</artifactId>
        </exclusion>
        <exclusion>
          <groupId>org.apache.geronimo.specs</groupId>
          <artifactId>geronimo-atinject_1.0_spec</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-concurrent -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-concurrent</artifactId>
      <version>0.2.0</version>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-kafka-client -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-kafka-client</artifactId>
      <version>0.0.15</version>
      <exclusions>
        <exclusion>
          <groupId>org.apache.kafka</groupId>
          <artifactId>kafka-clients</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-kafka-streams</artifactId>
      <version>0.0.15</version>
      <exclusions>
        <exclusion>
          <groupId>org.apache.kafka</groupId>
          <artifactId>kafka-streams</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-kafka-spring</artifactId>
      <version>0.0.15</version>
      <exclusions>
        <exclusion>
          <groupId>org.springframework.kafka</groupId>
          <artifactId>spring-kafka</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-web-servlet-filter -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-web-servlet-filter</artifactId>
      <version>0.2.0</version>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-solr-client -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-solr-client</artifactId>
      <version>0.0.2</version>
      <exclusions>
        <exclusion>
          <groupId>org.apache.solr</groupId>
          <artifactId>solr-solrj</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-rxjava --> <!-- !! -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-rxjava-1</artifactId>
      <version>0.0.9</version>
      <exclusions>
        <exclusion>
          <groupId>io.reactivex</groupId>
          <artifactId>rxjava</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-rxjava-2</artifactId>
      <version>0.0.9</version>
      <exclusions>
        <exclusion>
          <groupId>io.reactivex.rxjava2</groupId>
          <artifactId>rxjava</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-neo4j-driver -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-neo4j-driver</artifactId>
      <version>0.0.2</version>
      <exclusions>
        <exclusion>
          <groupId>org.neo4j.driver</groupId>
          <artifactId>neo4j-java-driver</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-memcached-client -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-spymemcached</artifactId>
      <version>0.0.3</version>
      <exclusions>
        <exclusion>
          <groupId>net.spy</groupId>
          <artifactId>spymemcached</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-mongo-driver -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-mongo-driver</artifactId>
      <version>0.0.6</version>
      <exclusions>
        <exclusion>
          <groupId>org.mongodb</groupId>
          <artifactId>mongo-java-driver</artifactId>
        </exclusion>
        <exclusion>
          <groupId>org.mongodb</groupId>
          <artifactId>mongodb-driver-async</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-spring-tracer-configuration -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-spring-tracer-configuration-starter</artifactId>
      <version>0.1.0</version>
      <exclusions>
        <exclusion>
          <groupId>org.springframework.boot</groupId>
          <artifactId>spring-boot-autoconfigure</artifactId>
        </exclusion>
        <exclusion>
          <groupId>org.springframework</groupId>
          <artifactId>spring-core</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-aws-sdk --> <!-- !! -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-aws-sdk</artifactId>
      <version>0.0.5</version>
      <exclusions>
        <exclusion>
          <groupId>com.amazonaws</groupId>
          <artifactId>aws-java-sdk</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-elasticsearch-client --> <!-- !! -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-elasticsearch5-client</artifactId>
      <version>0.0.6</version>
      <exclusions>
        <exclusion>
          <groupId>org.elasticsearch.client</groupId>
          <artifactId>transport</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-elasticsearch6-client</artifactId>
      <version>0.0.6</version>
      <exclusions>
        <exclusion>
          <groupId>org.elasticsearch.client</groupId>
          <artifactId>transport</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-rabbitmq-client -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-rabbitmq-client</artifactId>
      <version>0.0.6</version>
      <exclusions>
        <exclusion>
          <groupId>com.rabbitmq</groupId>
          <artifactId>amqp-client</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-cassandra-driver</artifactId>
      <version>0.0.8</version>
      <exclusions>
        <exclusion>
          <groupId>com.datastax.cassandra</groupId>
          <artifactId>cassandra-driver-core</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-jms --> <!-- !! -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-jms-1</artifactId>
      <version>0.0.10</version>
      <exclusions>
        <exclusion>
          <groupId>javax.jms</groupId>
          <artifactId>jms-api</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-jms-2</artifactId>
      <version>0.0.10</version>
      <exclusions>
        <exclusion>
          <groupId>javax.jms</groupId>
          <artifactId>javax.jms-api</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-spring-web -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-spring-web-starter</artifactId>
      <version>0.3.3</version>
      <exclusions>
        <exclusion>
          <groupId>org.springframework.boot</groupId>
          <artifactId>spring-boot-autoconfigure</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-jdbc -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-jdbc</artifactId>
      <version>0.0.8</version>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-grpc -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-grpc</artifactId>
      <version>0.0.8</version>
      <exclusions>
        <exclusion>
          <groupId>io.grpc</groupId>
          <artifactId>grpc-core</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-spring-zipkin --> <!-- !! -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-spring-zipkin-web-starter</artifactId>
      <version>0.2.0</version>
      <exclusions>
        <exclusion>
          <groupId>io.zipkin.brave</groupId>
          <artifactId>brave</artifactId>
        </exclusion>
        <exclusion>
          <groupId>io.zipkin.reporter2</groupId>
          <artifactId>zipkin-sender-okhttp3</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-spring-zipkin-cloud-starter</artifactId>
      <version>0.2.0</version>
    </dependency>
    <dependency>
      <!-- https://github.com/opentracing-contrib/java-akka -->
      <groupId>io.opentracing.contrib</groupId>
      <artifactId>opentracing-akka</artifactId>
      <version>0.0.2</version>
      <exclusions>
        <exclusion>
          <groupId>com.typesafe.akka</groupId>
          <artifactId>akka-actor_2.12</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
  </dependencies>

  <build>
    <plugins>
      <!--plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-shade-plugin</artifactId>
        <version>3.1.0</version>
        <executions>
          <execution>
            <phase>package</phase>
            <goals>
              <goal>shade</goal>
            </goals>
          </execution>
        </executions>
        <configuration>
          <finalName>${project.artifactId}</finalName>
          <transformers>
            <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
              <manifestEntries>
                <Main-Class>io.opentracing.contrib.uberjar.OpenTracingAgent2</Main-Class>
                <Agent-Class>io.opentracing.contrib.uberjar.OpenTracingAgent2</Agent-Class>
                <Premain-Class>io.opentracing.contrib.uberjar.OpenTracingAgent2</Premain-Class>
                <Can-Redefine-Classes>true</Can-Redefine-Classes>
                <Can-Retransform-Classes>true</Can-Retransform-Classes>
                <Boot-Class-Path>/Users/seva/Work/opentracing/src/opentracing-uberjar/target/opentracing-uberjar.jar</Boot-Class-Path>
              </manifestEntries>
            </transformer>
          </transformers>
        </configuration>
      </plugin-->
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-assembly-plugin</artifactId>
        <version>3.1.0</version>
        <configuration>
          <finalName>${project.artifactId}</finalName>
          <appendAssemblyId>false</appendAssemblyId>
          <descriptors>
            <descriptor>assembly.xml</descriptor>
          </descriptors>
          <archive>
            <manifestEntries>
              <Main-Class>io.opentracing.contrib.uberjar.OpenTracingAgent</Main-Class>
              <Agent-Class>io.opentracing.contrib.uberjar.OpenTracingAgent</Agent-Class>
              <Premain-Class>io.opentracing.contrib.uberjar.OpenTracingAgent</Premain-Class>
              <Can-Redefine-Classes>true</Can-Redefine-Classes>
              <Can-Retransform-Classes>true</Can-Retransform-Classes>
              <Boot-Class-Path>/Users/seva/Work/opentracing/src/opentracing-uberjar/target/opentracing-uberjar.jar</Boot-Class-Path>
            </manifestEntries>
          </archive>
        </configuration>
        <executions>
          <execution>
            <goals>
              <goal>single</goal>
            </goals>
            <phase>package</phase>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project>